<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>온마음 성장일기 · 학생용 MVP</title>
  <style>
    * { box-sizing: border-box; }
    :root { --bg:#fafafc; --card:#fff; --ink:#111; --muted:#6b7280; --accent:#2563eb; --ring:rgba(37,99,235,.25); --line:#e5e7eb; --warn:#fffbeb; }
    body{ margin:0; font-family: system-ui, -apple-system, "Noto Sans KR", Segoe UI, Roboto, Helvetica, Arial; background:var(--bg); color:var(--ink); }
    header{ position:sticky; top:0; z-index:10; background:linear-gradient(180deg,#fff 0%,rgba(255,255,255,.85) 60%,transparent); backdrop-filter: blur(8px); }
    .container{ max-width:1200px; margin:0 auto; padding:16px; }
    .brand{ display:flex; align-items:center; gap:12px; }
    .brand h1{ font-size:20px; margin:0; }

    .card{ background:var(--card); border:1px solid var(--line); border-radius:14px; box-shadow:0 2px 10px rgba(0,0,0,.04); }
    .section{ padding:16px; }
    .row{ display:flex; gap:10px; flex-wrap:wrap; align-items:center; }
    .field{ display:grid; gap:6px; flex:1; min-width:120px; }
    label{ font-size:12px; color:var(--muted); }
    input, select, textarea, button{ font:inherit; }
    input, select, textarea{ width:100%; padding:10px 12px; border:1px solid var(--line); border-radius:10px; background:#fff; }
    input:focus, select:focus, textarea:focus{ outline:none; border-color:var(--accent); box-shadow:0 0 0 4px var(--ring); }
    button{ padding:10px 14px; border-radius:10px; border:1px solid #d1d5db; background:#fff; cursor:pointer; }
    .btn{ background:var(--accent); color:#fff; border-color:var(--accent); }
    .btn:disabled{ opacity:.6; cursor:not-allowed; }
    .kicker{ color:var(--muted); font-size:12px; }
    .hint{ font-size:11px; color:#64748b; }
    .divider{ height:1px; background:var(--line); margin:12px 0; }
    .pill{ display:inline-flex; align-items:center; gap:6px; padding:6px 10px; border-radius:999px; border:1px solid var(--line); background:#fff; }

    #mainView .grid{ display:grid; grid-template-columns: 320px 1fr; gap:16px; }
    @media (max-width:960px){ #mainView .grid{ grid-template-columns: 1fr; } }
  </style>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

  <!-- Firebase 초기화 -->
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyCUvpi0A0Olc9t4Aamo6jCL5ZeKSppPmVM",
      authDomain: "haru-dc490.firebaseapp.com",
      databaseURL: "https://haru-dc490-default-rtdb.asia-southeast1.firebasedatabase.app",
      projectId: "haru-dc490",
      storageBucket: "haru-dc490.appspot.com",
      messagingSenderId: "1062975092523",
      appId: "1:1062975092523:web:3750d0e5722cae7767b76e",
      measurementId: "G-6VVS4MSJBT"
    };
    firebase.initializeApp(firebaseConfig);
    console.log("✅ Firebase Initialized:", firebase.apps.length);
  </script>
</head>

<body>
  <section id="authView" class="container" style="max-width:560px;">
    <div class="card section">
      <div class="kicker">계정</div>
      <div class="row">
        <div class="field"><label>아이디</label><input id="userid" placeholder="예: s1234"></div>
        <div class="field"><label>비밀번호</label><input id="password" type="password" placeholder="비밀번호"></div>
      </div>
      <div style="display:flex; gap:8px; margin-top:8px;">
        <button id="btnLogin" class="btn">로그인</button>
        <button id="btnSignup">회원가입</button>
      </div>
      <p class="hint">Firebase Auth 테스트용 로그인</p>
    </div>
  </section>

  <section id="mainView" class="container" style="display:none;">
    <h2>로그인 성공 🎉</h2>
    <button id="btnLogout" class="btn">로그아웃</button>
  </section>

  <script>
    const auth = firebase.auth();

    function show(view) {
      document.getElementById('authView').style.display = (view === 'auth') ? 'block' : 'none';
      document.getElementById('mainView').style.display = (view === 'main') ? 'block' : 'none';
    }

    document.getElementById('btnSignup').addEventListener('click', async () => {
      const id = document.getElementById('userid').value.trim();
      const pw = document.getElementById('password').value;
      if (!id || !pw) return alert('아이디와 비밀번호를 입력하세요.');

      try {
        const email = `${id}@id.onmaum`;
        await auth.createUserWithEmailAndPassword(email, pw);
        alert('회원가입 성공!');
        show('main');
      } catch (e) {
        alert('회원가입 실패: ' + e.message);
      }
    });

    document.getElementById('btnLogin').addEventListener('click', async () => {
      const id = document.getElementById('userid').value.trim();
      const pw = document.getElementById('password').value;
      if (!id || !pw) return alert('아이디와 비밀번호를 입력하세요.');

      try {
        const email = `${id}@id.onmaum`;
        await auth.signInWithEmailAndPassword(email, pw);
        alert('로그인 성공!');
        show('main');
      } catch (e) {
        alert('로그인 실패: ' + e.message);
      }
    });

    document.getElementById('btnLogout').addEventListener('click', async () => {
      await auth.signOut();
      alert('로그아웃 되었습니다.');
      show('auth');
    });
  </script>
</body>
</html>
